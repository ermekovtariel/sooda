{
  "version": 3,
  "sources": ["../../react-input-emoji/node_modules/style-inject/dist/style-inject.es.js", "../../react-input-emoji/src/utils/emoji-utils.js", "../../react-input-emoji/src/utils/input-event-utils.js", "../../react-input-emoji/src/hooks/use-sanitize.js", "../../react-input-emoji/src/hooks/use-expose.js", "../../react-input-emoji/src/hooks/use-emit.js", "../../react-input-emoji/src/text-input.js", "../../react-input-emoji/src/components/emoji-picker-button.js", "../../react-input-emoji/node_modules/@emoji-mart/react/dist/module.js", "../../react-input-emoji/src/components/emoji-picker.js", "../../react-input-emoji/src/components/emoji-picker-container.js", "../../react-input-emoji/src/components/emoji-picker-wrapper.js", "../../react-input-emoji/src/utils/mention-utils.js", "../../react-input-emoji/src/hooks/use-mention.js", "../../react-input-emoji/src/components/mention-user-list.js", "../../react-input-emoji/src/components/mention-wrapper.js", "../../react-input-emoji/src/utils/observer.js", "../../react-input-emoji/src/hooks/use-event-listeners.js", "../../react-input-emoji/src/hooks/user-pollute.js", "../../react-input-emoji/src/index.js"],
  "sourcesContent": ["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n", "/* eslint-disable valid-jsdoc */\n// @ts-check\n\nexport const TRANSPARENT_GIF =\n  \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n\nexport const EMOJI_STYLE = \"\";\n\n/**\n * Replace all text with emoji with an image html tag\n * @param {string} text\n * @return {string}\n */\nexport function replaceAllTextEmojis(text) {\n  let allEmojis = getAllEmojisFromText(text);\n\n  if (allEmojis) {\n    allEmojis = [...new Set(allEmojis)]; // remove duplicates\n\n    allEmojis.forEach(emoji => {\n      text = replaceAll(text, emoji, getInputEmojiHTML('', emoji));\n    });\n  }\n\n  return text;\n}\n\n/**\n * Replace all occurrencies in a string\n * @param {string} str\n * @param {string} find\n * @param {string} replace\n * @return {string}\n */\nfunction replaceAll(str, find, replace) {\n  return str.replace(new RegExp(find, \"g\"), replace);\n}\n\n/**\n * Get all emojis from the text\n * @param {string} text\n * @return {string[]}\n */\nfunction getAllEmojisFromText(text) {\n  return text.match(\n    /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*/g\n  );\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param { import(\"../types/types\").EmojiMartItem } emoji\n * @return {string}\n */\nexport function getImageEmoji(emoji) {\n  /** @type {HTMLElement | null} */\n  const emojiPickerEl = document.querySelector('em-emoji-picker')\n\n  if (!emojiPickerEl) {\n    return getInputEmojiNativeHTML(emoji.native)\n  }\n\n  /** @type {HTMLSpanElement | null=} */\n  const emojiSpanEl = emojiPickerEl?.shadowRoot?.querySelector(`[title=\"${emoji.name}\"] > span > span`)\n\n  if (!emojiSpanEl) {\n    return getInputEmojiNativeHTML(emoji.native)\n  }\n\n  const style = replaceAll(emojiSpanEl.style.cssText, '\"', \"'\");\n\n  return getInputEmojiHTML(style, emoji.native);\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param {string} style\n * @param {string} emoji\n * @returns\n */\nfunction getInputEmojiHTML(style, emoji) {\n  return `<img style=\"${style}; display: inline-block\" data-emoji=\"${emoji}\" src=\"${TRANSPARENT_GIF}\" />`;\n}\n\n/**\n * \n * @param {string} emoji \n * @returns \n */\nfunction getInputEmojiNativeHTML(emoji) {\n  return `<span class=\"width: 18px; height: 18px; display: inline-block; margin: 0 1px;\">${emoji}</span>`;\n}\n\n/**\n *\n * @param {string} html\n * @return {string}\n */\nexport function replaceAllTextEmojiToString(html) {\n  const container = document.createElement(\"div\");\n  container.innerHTML = html;\n\n  const images = Array.prototype.slice.call(container.querySelectorAll(\"img\"));\n\n  images.forEach(image => {\n    container.innerHTML = container.innerHTML.replace(\n      image.outerHTML,\n      image.dataset.emoji\n    );\n  });\n\n  return container.innerHTML;\n}\n", "// @ts-check\n\nimport {\n  getImageEmoji,\n  replaceAllTextEmojis,\n  replaceAllTextEmojiToString\n} from \"./emoji-utils\";\n\n/**\n * Handle copy of current selected text\n * @param {React.ClipboardEvent} event\n */\nexport function handleCopy(event) {\n  const selectedText = window.getSelection();\n\n  if (selectedText === null) {\n    return\n  }\n\n  let container = document.createElement(\"div\");\n\n  for (let i = 0, len = selectedText.rangeCount; i < len; ++i) {\n    container.appendChild(selectedText.getRangeAt(i).cloneContents());\n  }\n\n  container = replaceEmojiToString(container);\n\n  event.clipboardData.setData(\"text\", container.innerText);\n  event.preventDefault();\n}\n\n/**\n *\n * @param {string} html\n */\nexport function handlePasteHtmlAtCaret(html) {\n  let sel;\n  let range;\n  if (window.getSelection) {\n    // IE9 and non-IE\n    sel = window.getSelection();\n\n    if (sel === null) return\n\n    if (sel.getRangeAt && sel.rangeCount) {\n      range = sel.getRangeAt(0);\n      range.deleteContents();\n\n      // Range.createContextualFragment() would be useful here but is\n      // non-standard and not supported in all browsers (IE9, for one)\n      const el = document.createElement(\"div\");\n      el.innerHTML = html;\n      const frag = document.createDocumentFragment();\n      let node;\n      let lastNode;\n      while ((node = el.firstChild)) {\n        lastNode = frag.appendChild(node);\n      }\n      range.insertNode(frag);\n\n      // Preserve the selection\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        sel.removeAllRanges();\n        sel.addRange(range);\n      }\n    }\n  }\n}\n\n/**\n * Replace emoji img to its string value\n * @param {HTMLDivElement} container\n * @return {HTMLDivElement}\n */\nfunction replaceEmojiToString(container) {\n  const images = Array.prototype.slice.call(container.querySelectorAll(\"img\"));\n\n  images.forEach(image => {\n    image.outerHTML = image.dataset.emoji;\n  });\n\n  return container;\n}\n\n/**\n * Handle past on input\n * @param {React.ClipboardEvent} event\n */\nexport function handlePaste(event) {\n  event.preventDefault();\n  let content;\n  if (event.clipboardData) {\n    content = event.clipboardData.getData(\"text/plain\");\n    content = replaceAllTextEmojis(content);\n    document.execCommand(\"insertHTML\", false, content);\n  }\n}\n\n/**\n * @typedef {object} HandleKeyDownOptions\n * @property {HTMLDivElement} placeholderEl\n * @property {number} maxLength\n * @property {HTMLDivElement} inputEl\n * @property {React.MutableRefObject<string>} cleanedTextRef\n * @property {React.MutableRefObject<HTMLDivElement>} textInputRef\n * @property {boolean} cleanOnEnter\n * @property {function(): void} emitChange\n * @property {(function(string): void)=} onEnter\n * @property {(function(KeyboardEvent): void)=} onKeyDown\n * @property {(function(string): void)} updateHTML\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @typedef {Object} HandleSelectEmojiProps\n * @property {import(\"../types/types\").EmojiMartItem} emoji\n * @property {React.MutableRefObject<import('../text-input').Ref>} textInputRef\n * @property {boolean} keepOpened\n * @property {() => void} toggleShowPicker\n * @property {number=} maxLength\n */\n\n/**\n *\n * @param {HandleSelectEmojiProps} props\n */\nexport function handleSelectEmoji({\n  emoji,\n  textInputRef,\n  keepOpened,\n  toggleShowPicker,\n  maxLength\n}) {\n  if (\n    typeof maxLength !== \"undefined\" &&\n    totalCharacters(textInputRef.current) >= maxLength\n  ) {\n    return;\n  }\n\n  textInputRef.current.appendContent(getImageEmoji(emoji));\n\n  if (!keepOpened) {\n    toggleShowPicker();\n  }\n}\n\n/**\n *\n * @param {{text: string, html: string}} props\n * @return {number}\n */\nexport function totalCharacters({ text, html }) {\n  const textCount = text.length;\n  const emojisCount = (html.match(/<img/g) || []).length;\n\n  return textCount + emojisCount;\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * Handle keyup event\n * @param {() => void} emitChange\n * @param {(event: KeyboardEvent) => void} onKeyDownMention\n * @param {React.MutableRefObject<string>} cleanedTextRef\n * @param {React.MutableRefObject<HTMLDivElement>} textInputRef\n * @return {(event: KeyboardEvent) => void}\n */\nexport function handleKeyup(\n  emitChange,\n  onKeyDownMention,\n  cleanedTextRef,\n  textInputRef\n) {\n  return event => {\n    const text = replaceAllTextEmojiToString(textInputRef.current.innerHTML);\n    cleanedTextRef.current = text;\n    emitChange();\n    onKeyDownMention(event);\n  };\n}\n\n/**\n * Handle focus event\n * @param {function(FocusEvent): void} onFocus\n * @return {function(FocusEvent): void}\n */\nexport function handleFocus(onFocus) {\n  return event => {\n    onFocus(event);\n  };\n}\n\n/**\n * Set caret to the end of text value\n * @param {React.MutableRefObject<HTMLDivElement| null>} input\n */\nexport function moveCaretToEnd(input) {\n  let range\n  let selection\n  if(document.createRange && input.current) {\n      range = document.createRange()\n      range.selectNodeContents(input.current)\n      range.collapse(false)\n      selection = window.getSelection()\n      if(selection) {\n        selection.removeAllRanges()\n        selection.addRange(range)\n      }\n  }\n}\n/**\n * \n * @param {HTMLDivElement} inputDiv \n * @return {string}\n */\nexport function removeHtmlExceptBr(inputDiv) {\n  const temp = inputDiv.innerHTML.replace(/<br\\s*\\/?>/gi, '[BR]'); // temporarily replace <br> with placeholder\n  const stripped = temp.replace(/<[^>]+>/g, ''); // strip all html tags\n  const final = stripped.replace(/\\[BR\\]/gi, '</br>'); // replace placeholders with <br>\n  return final;\n}", "// @ts-check\n\nimport { useCallback, useRef } from \"react\";\nimport { removeHtmlExceptBr } from \"../utils/input-event-utils\";\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @param {boolean} shouldReturn\n */\nexport function useSanitize(shouldReturn) {\n  /** @type {React.MutableRefObject<SanitizeFn[]>} */\n  const sanitizeFnsRef = useRef([]);\n\n  const sanitizedTextRef = useRef(\"\");\n\n  /** @type {(fn: SanitizeFn) => void} */\n  const addSanitizeFn = useCallback(fn => {\n    sanitizeFnsRef.current.push(fn);\n  }, []);\n\n  /** @type {(html: string) => string} */\n  const sanitize = useCallback(html => {\n    let result = sanitizeFnsRef.current.reduce((acc, fn) => {\n      return fn(acc);\n    }, html);\n\n    result = replaceAllHtmlToString(result, shouldReturn);\n\n    sanitizedTextRef.current = result;\n\n    return result;\n  }, []);\n\n  return { addSanitizeFn, sanitize, sanitizedTextRef };\n}\n\n/**\n *\n * @param {string} html\n * @param {boolean} shouldReturn\n * @return {string}\n */\nexport function replaceAllHtmlToString(html, shouldReturn) {\n  const container = document.createElement(\"div\");\n  container.innerHTML = html;\n  let text\n  if(shouldReturn) {\n    text = removeHtmlExceptBr(container)\n  } else {\n    text = container.innerText || \"\";\n  }\n\n  // remove all ↵ for safari\n  text = text.replace(/\\n/gi, \"\");\n\n  return text;\n}\n", "// @ts-check\n\nimport { useImperativeHandle } from \"react\";\nimport { useSanitize } from \"./use-sanitize\";\n\n/**\n * @typedef {Object} Props\n * @property {React.Ref<any>} ref\n * @property {React.MutableRefObject<import('../text-input').Ref | null>} textInputRef\n * @property {(value: string) => void} setValue\n * @property {() => void} emitChange\n */\n\n/**\n *\n * @param {Props} props\n */\nexport function useExpose({ ref, textInputRef, setValue, emitChange }) {\n  const { sanitize, sanitizedTextRef } = useSanitize(false);\n\n  useImperativeHandle(ref, () => ({\n    get value() {\n      return sanitizedTextRef.current;\n    },\n    set value(value) {\n      setValue(value);\n    },\n    focus: () => {\n      if (textInputRef.current === null) return\n      textInputRef.current.focus();\n    },\n    blur: () => {\n      if (textInputRef.current !== null) {\n        sanitize(textInputRef.current.html);\n\n      }\n\n      emitChange();\n    }\n  }));\n}\n", "// @ts-check\n\nimport { useCallback, useEffect, useRef } from \"react\";\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * useEmit\n * @param {React.MutableRefObject<import('../text-input').Ref | null>} textInputRef\n * @param {(size: {width: number, height: number}) => void} onResize\n * @param {(text: string) => void} onChange\n */\nexport function useEmit(textInputRef, onResize, onChange) {\n  /** @type {React.MutableRefObject<{width: number; height: number} | null>} */\n  const currentSizeRef = useRef(null);\n  const onChangeFn = useRef(onChange);\n\n  const checkAndEmitResize = useCallback(() => {\n    if (textInputRef.current !== null) {\n      const currentSize = currentSizeRef.current;\n\n      const nextSize = textInputRef.current.size;\n\n      if (\n        (!currentSize ||\n          currentSize.width !== nextSize.width ||\n          currentSize.height !== nextSize.height) &&\n        typeof onResize === \"function\"\n      ) {\n        onResize(nextSize);\n      }\n\n      currentSizeRef.current = nextSize;\n    }\n  }, [onResize, textInputRef]);\n\n  const emitChange = useCallback((sanitizedText) => {\n    if (typeof onChangeFn.current === \"function\") {\n      onChangeFn.current(sanitizedText);\n    }\n\n    if (typeof onResize === \"function\") {\n      checkAndEmitResize();\n    }\n  }, [checkAndEmitResize, onResize]);\n\n  useEffect(() => {\n    if (textInputRef.current) {\n      checkAndEmitResize();\n    }\n  }, [checkAndEmitResize, textInputRef]);\n\n  return emitChange;\n}\n", "// @ts-check\n// vendors\nimport React, { useImperativeHandle, forwardRef, useRef } from \"react\";\nimport { handlePasteHtmlAtCaret, moveCaretToEnd } from \"./utils/input-event-utils\";\nimport { replaceAllTextEmojiToString } from \"./utils/emoji-utils\";\n\n/**\n * @typedef {Object} Props\n * @property {(event: React.KeyboardEvent) => void} onKeyDown\n * @property {(event: React.KeyboardEvent) => void} onKeyUp\n * @property {() => void} onFocus\n * @property {() => void} onBlur\n * @property {(sanitizedText: string) => void=} onChange\n * @property {(event: React.KeyboardEvent) => void} onArrowUp\n * @property {(event: React.KeyboardEvent) => void} onArrowDown\n * @property {(event: React.KeyboardEvent) => void} onEnter\n * @property {boolean} shouldReturn\n * @property {(event: React.ClipboardEvent) => void} onCopy\n * @property {(event: React.ClipboardEvent) => void} onPaste\n * @property {string} placeholder\n * @property {React.CSSProperties} style\n * @property {number} tabIndex\n * @property {string} className\n * @property {(html: string) => void} onChange\n */\n\n/**\n * @typedef {{\n *  appendContent: (html: string) => void;\n *  html: string;\n *  text: string;\n *  size: { width: number; height: number;};\n *  focus: () => void;\n * }} Ref\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.ForwardRefRenderFunction<Ref, Props>} */\nconst TextInput = (\n  { placeholder, style, tabIndex, className, onChange, ...props },\n  ref\n) => {\n  useImperativeHandle(ref, () => ({\n    appendContent: html => {\n      if (textInputRef.current) {\n        textInputRef.current.focus();\n      }\n\n      handlePasteHtmlAtCaret(html);\n\n      if (textInputRef.current) {\n        textInputRef.current.focus();\n      }\n\n      if (textInputRef.current && placeholderRef.current && replaceAllTextEmojiToString(textInputRef.current.innerHTML) === \"\") {\n        placeholderRef.current.style.visibility = \"visible\";\n      } else if (placeholderRef.current) {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n\n      if (textInputRef.current && typeof onChange === 'function') {\n        onChange(textInputRef.current.innerHTML);\n      }\n    },\n    set html(value) {\n      if (textInputRef.current) {\n        textInputRef.current.innerHTML = value;\n      }\n      \n      if (placeholderRef.current) {\n        const text = replaceAllTextEmojiToString(value)\n        if (text === \"\") {\n          placeholderRef.current.style.visibility = \"visible\";\n        } else {\n          placeholderRef.current.style.visibility = \"hidden\";\n        }\n      }\n\n      if (typeof onChange === 'function' && textInputRef.current) {\n        onChange(textInputRef.current.innerHTML);\n      }\n    },\n    get html() {\n      if (!textInputRef.current) return ''\n\n      return textInputRef.current.innerHTML;\n    },\n    get text() {\n      if (!textInputRef.current) return ''\n\n      return textInputRef.current.innerText;\n    },\n    get size() {\n      if (!textInputRef.current) {\n        return {\n          width: 0,\n          height: 0\n        }\n      }\n\n      return {\n        width: textInputRef.current.offsetWidth,\n        height: textInputRef.current.offsetHeight\n      };\n    },\n    focus() {\n      if (!textInputRef.current) return\n\n      textInputRef.current.focus();\n    }\n  }));\n\n  /** @type {React.MutableRefObject<HTMLDivElement | null>} */\n  const placeholderRef = useRef(null);\n  /** @type {React.MutableRefObject<HTMLDivElement | null>} */\n  const textInputRef = useRef(null);\n\n  /**\n   *\n   * @param {React.KeyboardEvent} event\n   */\n  function handleKeyDown(event) {\n    if (event.key === \"Enter\" && (event.shiftKey === true || event.ctrlKey === true) && props.shouldReturn) {\n      event.preventDefault();\n      if(textInputRef.current) {\n        textInputRef.current.innerHTML = `${textInputRef.current.innerHTML}</br></br>`\n        moveCaretToEnd(textInputRef)\n        return;\n      }\n    } \n    if (event.key === \"Enter\") {\n      props.onEnter(event);\n    } else if (event.key === \"ArrowUp\") {\n      props.onArrowUp(event);\n    } else if (event.key === \"ArrowDown\") {\n      props.onArrowDown(event);\n    } else {\n      if (event.key.length === 1 && placeholderRef.current) {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n    }\n\n    props.onKeyDown(event);\n  }\n\n  /** */\n  function handleClick() {\n    props.onFocus();\n  }\n\n  /**\n   *\n   * @param {React.KeyboardEvent} event\n   */\n  function handleKeyUp(event) {\n    props.onKeyUp(event);\n\n    const input = textInputRef.current;\n\n    if (placeholderRef.current && input) {\n      const text = replaceAllTextEmojiToString(input.innerHTML)\n      if (text === \"\") {\n        placeholderRef.current.style.visibility = \"visible\";\n      } else {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n    }\n\n    if (typeof onChange === 'function' && textInputRef.current) {\n      onChange(textInputRef.current.innerHTML);\n    }\n  }\n\n  return (\n    <div className=\"react-input-emoji--container\" style={style}>\n      <div className=\"react-input-emoji--wrapper\" onClick={handleClick}>\n        <div ref={placeholderRef} className=\"react-input-emoji--placeholder\">\n          {placeholder}\n        </div>\n        <div\n          ref={textInputRef}\n          onKeyDown={handleKeyDown}\n          onKeyUp={handleKeyUp}\n          tabIndex={tabIndex}\n          contentEditable\n          className={`react-input-emoji--input${className ? ` ${className}` : \"\"\n            }`}\n          onBlur={props.onBlur}\n          onCopy={props.onCopy}\n          onPaste={props.onPaste}\n          data-testid=\"react-input-emoji--input\"\n        />\n      </div>\n    </div>\n  );\n};\n\nconst TextInputWithRef = forwardRef(TextInput);\n\nexport default TextInputWithRef;\n", "// vendors\nimport React, { useEffect, useRef, useState } from \"react\";\n\n/**\n * @typedef {object} Props\n * @property {boolean} showPicker\n * @property {(event: React.MouseEvent) => void} toggleShowPicker\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n */\n\n/**\n * Emoji Picker Button Component\n * @param {Props} props\n * @return {JSX.Element}\n */\nfunction EmojiPickerButton({ showPicker, toggleShowPicker, buttonElement, buttonRef }) {\n  \n  const localButtonRef = useRef(null);\n  const [showCustomButtonContent, setShowCustomButtonContent] = useState(false);\n\n  useEffect(() => {\n    if ((buttonRef?.current?.childNodes?.length ?? 0) > 2) {\n      localButtonRef.current.appendChild(buttonRef.current.childNodes[0]);\n      setShowCustomButtonContent(true);\n    } else if ((buttonElement?.childNodes?.length ?? 0) > 2) {\n      localButtonRef.current.appendChild(buttonElement?.childNodes[0]);\n      setShowCustomButtonContent(true);\n    }\n  }, [buttonElement?.childNodes]);\n\n  return (\n    <button\n      ref={localButtonRef}\n      type=\"button\"\n      className={`react-input-emoji--button${\n        showPicker ? \" react-input-emoji--button__show\" : \"\"\n      }`}\n      onClick={toggleShowPicker}\n    >\n      {!showCustomButtonContent && (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          width=\"24\"\n          height=\"24\"\n          className=\"react-input-emoji--button--icon\"\n        >\n          {/* eslint-disable-next-line max-len */}\n          <path d=\"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10\" />\n          {/* eslint-disable-next-line max-len */}\n          <path d=\"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0\" />\n        </svg>\n      )}\n    </button>\n  );\n}\n\nexport default EmojiPickerButton;\n", "import $dvPge$react, {useRef as $dvPge$useRef, useEffect as $dvPge$useEffect} from \"react\";\nimport {Picker as $dvPge$Picker} from \"emoji-mart\";\n\n\n\nfunction $e5534fc185f7111e$export$2e2bcd8739ae039(props) {\n    const ref = (0, $dvPge$useRef)(null);\n    const instance = (0, $dvPge$useRef)(null);\n    if (instance.current) instance.current.update(props);\n    (0, $dvPge$useEffect)(()=>{\n        instance.current = new (0, $dvPge$Picker)({\n            ...props,\n            ref: ref\n        });\n        return ()=>{\n            instance.current = null;\n        };\n    }, []);\n    return /*#__PURE__*/ (0, $dvPge$react).createElement(\"div\", {\n        ref: ref\n    });\n}\n\n\nexport {$e5534fc185f7111e$export$2e2bcd8739ae039 as default};\n//# sourceMappingURL=module.js.map\n", "// vendors\nimport React, { memo, useMemo } from \"react\";\nimport Picker from \"@emoji-mart/react\";\n\n/**\n * @typedef {object} Props\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {function(import(\"../types/types\").EmojiMartItem): void} onSelectEmoji\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {import('../types/types').Languages=} language\n */\n\n/**\n * Emoji Picker Component\n * @param {Props} props\n */\nfunction EmojiPicker(props) {\n  const { theme, onSelectEmoji, disableRecent, customEmojis, language } = props;\n\n  /** @type {string[]} */\n  const categories = useMemo(() => {\n    /** @type {string[]} */\n    let categoryies = [];\n\n    if (!disableRecent) {\n      categoryies.push(\"frequent\");\n    }\n\n    categoryies = [\n      ...categoryies,\n      \"people\",\n      \"nature\",\n      \"foods\",\n      \"activity\",\n      \"places\",\n      \"objects\",\n      \"symbols\",\n      \"flags\"\n    ];\n\n    return categoryies;\n  }, [disableRecent]);\n\n  const i18n = useMemo(() => {\n    if (!language) {\n      return undefined\n    }\n\n    return require(`@emoji-mart/data/i18n/${language ?? 'en'}.json`)\n  }, [language])\n\n  return (\n    <Picker\n      data={undefined}\n      theme={theme}\n      previewPosition=\"none\"\n      onEmojiSelect={onSelectEmoji}\n      custom={customEmojis}\n      categories={categories}\n      set=\"apple\"\n      i18n={i18n}\n    />\n  );\n}\n\n\nexport default memo(EmojiPicker);\n", "import React from \"react\";\nimport EmojiPicker from \"./emoji-picker\";\n\n/**\n * @typedef {object} Props\n * @property {boolean} showPicker\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {(emoji: import(\"../types/types\").EmojiMartItem) => void} handleSelectEmoji\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {('above' | 'below')=} position\n * @property {import('../types/types').Languages=} language\n */\n\n/**\n * Emoji Picker Button Component\n * @param {Props} props\n * @return {JSX.Element}\n */\nfunction EmojiPickerContainer({\n  showPicker,\n  theme,\n  handleSelectEmoji,\n  disableRecent,\n  customEmojis,\n  position,\n  language\n}) {\n  return (\n    <div className=\"react-emoji-picker--container\">\n      {showPicker && (\n        <div\n          className=\"react-emoji-picker--wrapper\"\n          onClick={evt => evt.stopPropagation()}\n          style={position === 'below' ? {top: '40px'} : {}}\n        >\n          <div className=\"react-emoji-picker\">\n            <EmojiPicker\n              theme={theme}\n              onSelectEmoji={handleSelectEmoji}\n              disableRecent={disableRecent}\n              customEmojis={customEmojis}\n              language={language}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default EmojiPickerContainer;\n", "// @ts-check\n// vendors\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  getImageEmoji,\n  replaceAllTextEmojis,\n  replaceAllTextEmojiToString\n} from \"../utils/emoji-utils\";\n\nimport EmojiPickerButton from \"./emoji-picker-button\";\nimport EmojiPickerContainer from \"./emoji-picker-container\";\n\nconst EMOJI_PICKER_CONTAINER_HEIGHT = 435;\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n/**\n * @typedef {import('../types/types').PolluteFn} PolluteFn\n */\n\n/**\n * @typedef {Object} Props\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {boolean} keepOpened\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {(fn: SanitizeFn) => void} addSanitizeFn\n * @property {(fn: PolluteFn) => void} addPolluteFn\n * @property {(html: string) => void} appendContent\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n * @property {import('../types/types').Languages=} language\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.FC<Props>} */\nconst EmojiPickerWrapper = props => {\n  const {\n    theme,\n    keepOpened,\n    disableRecent,\n    customEmojis,\n    addSanitizeFn,\n    addPolluteFn,\n    appendContent,\n    buttonElement,\n    buttonRef,\n    language\n  } = props;\n\n  const [showPicker, setShowPicker] = useState(false);\n  /** @type {[HTMLDivElement | undefined, React.Dispatch<React.SetStateAction<HTMLDivElement | undefined>>]} */\n  const [customButton, setCustomButton] = useState();\n  /** @type {['above' | 'below' | undefined, React.Dispatch<React.SetStateAction<'above' | 'below' | undefined>>]} */\n  const [emojiPickerPosition, setEmojiPickerPosition] = useState()\n\n  useEffect(() => {\n    addSanitizeFn(replaceAllTextEmojiToString);\n  }, [addSanitizeFn]);\n\n  useEffect(() => {\n    addPolluteFn(replaceAllTextEmojis);\n  }, [addPolluteFn]);\n\n  useEffect(() => {\n    /**\n     *\n     * @param {MouseEvent} event\n     */\n    function checkClickOutside(event) {\n      /** @type {HTMLElement} */\n      // @ts-ignore\n      const element = event.target;\n\n      if (\n        element.classList.contains(\"react-input-emoji--button\") ||\n        element.classList.contains(\"react-input-emoji--button--icon\")\n      ) {\n        return;\n      }\n\n      setShowPicker(false);\n    }\n\n    document.addEventListener(\"click\", checkClickOutside);\n\n    return () => {\n      document.removeEventListener(\"click\", checkClickOutside);\n    };\n  }, []);\n\n  /**\n   *\n   * @param {React.MouseEvent} event\n   */\n  function toggleShowPicker(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    setEmojiPickerPosition(calcTopPosition(event))\n\n    setShowPicker(currentShowPicker => !currentShowPicker);\n  }\n\n  /**\n   * \n   * @param {React.MouseEvent} event\n   * @return {'above' | 'below'}\n   */\n  function calcTopPosition(event) {\n    const btn = event.currentTarget\n    const btnRect = btn.getBoundingClientRect();\n\n    const popoverHeight = EMOJI_PICKER_CONTAINER_HEIGHT;\n\n    // Decide to display above or below based on available space\n    if (btnRect.top >= popoverHeight) {\n        // Display above\n        return 'above'\n    } else {\n        // Display below\n        return 'below'\n    }\n  }\n\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   *\n   * @param {import(\"../types/types\").EmojiMartItem} emoji\n   */\n  function handleSelectEmoji(emoji) {\n    appendContent(getImageEmoji(emoji));\n\n    if (!keepOpened) {\n      setShowPicker(currentShowPicker => !currentShowPicker);\n    }\n  }\n\n  useEffect(() => {\n    if (buttonRef?.current?.style) {\n      buttonRef.current.style.position = \"relative\";\n      setCustomButton(buttonRef.current);\n    }  else if (buttonElement?.style) {\n      buttonElement.style.position = \"relative\";\n      setCustomButton(buttonElement);\n    }\n  }, [buttonRef, buttonElement]);\n\n  return customButton ? (\n    (ReactDOM.createPortal(\n      <>\n        <EmojiPickerContainer\n          showPicker={showPicker}\n          theme={theme}\n          handleSelectEmoji={handleSelectEmoji}\n          disableRecent={disableRecent}\n          customEmojis={customEmojis}\n          position={emojiPickerPosition}\n          language={language}\n        />\n        <EmojiPickerButton\n          showPicker={showPicker}\n          toggleShowPicker={toggleShowPicker}\n          buttonElement={customButton}\n          buttonRef={buttonRef}\n        />\n      </>,\n      customButton\n    ))\n  ) : (\n    (<>\n      <EmojiPickerContainer\n        showPicker={showPicker}\n        theme={theme}\n        handleSelectEmoji={handleSelectEmoji}\n        disableRecent={disableRecent}\n        customEmojis={customEmojis}\n        position={emojiPickerPosition}\n        language={language}\n      />\n      <EmojiPickerButton\n        showPicker={showPicker}\n        toggleShowPicker={toggleShowPicker}\n      />\n    </>)\n  );\n};\n\nexport default EmojiPickerWrapper;\n", "// @ts-check\n\n/**\n *\n * @return {string | null}\n */\nexport function getTextFromAtToCaret() {\n  const range = getRangeFromAtToCaret();\n\n  if (!range) return null;\n\n  const text = range.text.substring(range.begin, range.end);\n\n  return text || null;\n}\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function deleteTextFromAtToCaret() {\n  const range = getRangeFromAtToCaret();\n\n  if (!range) return;\n\n  // @ts-ignore\n  range.element.deleteData(range.begin, range.end - range.begin);\n}\n\n/**\n *\n * @return {{begin: number, end: number, text: string, element: Node} | null}\n */\nfunction getRangeFromAtToCaret() {\n  const elementWithFocus = getElementWithFocus();\n\n  if (!elementWithFocus) {\n    return null;\n  }\n\n  const { element, caretOffset } = elementWithFocus;\n  const text = element.textContent;\n  const lastAt = text.lastIndexOf(\"@\");\n\n  if (\n    lastAt === -1 ||\n    lastAt >= caretOffset ||\n    (lastAt !== 0 && text[lastAt - 1] !== \" \")\n  ) {\n    return null;\n  }\n\n  return { begin: lastAt, end: caretOffset, text, element };\n}\n\n/**\n *\n * @return {{element: Node, caretOffset: number}}\n */\nexport function getElementWithFocus() {\n  const element = getSelectionStart();\n\n  if (element === null) {\n    return null;\n  }\n\n  let caretOffset = 0;\n  if (typeof window.getSelection != \"undefined\") {\n    const range = window.getSelection().getRangeAt(0);\n    const preCaretRange = range.cloneRange();\n    preCaretRange.selectNodeContents(element);\n    preCaretRange.setEnd(range.endContainer, range.endOffset);\n    caretOffset = preCaretRange.toString().length;\n  } else if (\n    // @ts-ignore\n    typeof document.selection != \"undefined\" &&\n    // @ts-ignore\n    document.selection.type != \"Control\"\n  ) {\n    // @ts-ignore\n    const textRange = document.selection.createRange();\n    // @ts-ignore\n    const preCaretTextRange = document.body.createTextRange();\n    preCaretTextRange.moveToElementText(element);\n    preCaretTextRange.setEndPoint(\"EndToEnd\", textRange);\n    caretOffset = preCaretTextRange.text.length;\n  }\n\n  return { element, caretOffset };\n}\n\n/**\n *\n * @return {Node | null}\n */\nfunction getSelectionStart() {\n  const node = document.getSelection().anchorNode;\n  return node?.nodeType == 3 ? node : null;\n}\n", "// @ts-check\nimport { useCallback, useState } from \"react\";\nimport {\n  deleteTextFromAtToCaret,\n  getElementWithFocus,\n  getTextFromAtToCaret\n} from \"../utils/mention-utils\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MentionUser\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param {(text: string) => Promise<MentionUser[]>=} searchMention\n * @returns {{mentionSearchText: string | null, mentionUsers: MentionUser[], onKeyUp: (event: React.KeyboardEvent) => void, onFocus: () => void, onSelectUser: () => void, loading: boolean}}\n */\nexport function useMention(searchMention) {\n  const [loading, setLoading] = useState(false);\n\n  /** @type {[MentionUser[], React.Dispatch<React.SetStateAction<MentionUser[]>>]} */\n  const [mentionUsers, setMentionUsers] = useState([]);\n\n  /** @type {[string | null, React.Dispatch<React.SetStateAction<string | null>>]} */\n  const [mentionSearchText, setMentionSearchText] = useState(null);\n\n  const onSelectUser = useCallback(() => {\n    deleteTextFromAtToCaret();\n    setMentionUsers([]);\n  }, []);\n\n  /** */\n  const checkMentionText = useCallback(async () => {\n    const metionText = getTextFromAtToCaret();\n\n    setMentionSearchText(metionText);\n\n    if (metionText === null) {\n      setMentionUsers([]);\n    } else {\n      setLoading(true);\n      const users = await searchMention(metionText);\n      setLoading(false);\n      setMentionUsers(users);\n    }\n  }, [searchMention]);\n\n  /** @type {(event: React.KeyboardEvent) => void} */\n  const onKeyUp = useCallback(\n    async event => {\n      if (typeof searchMention !== \"function\") return;\n\n      if (\n        event.key === \"Backspace\" &&\n        getElementWithFocus()?.element.parentElement.hasAttribute(\n          \"data-mention-id\"\n        )\n      ) {\n        const elementWithFocus = getElementWithFocus();\n        elementWithFocus.element.parentElement.remove();\n      } else if (\n        ![\"ArrowUp\", \"ArrowDown\", \"Esc\", \"Escape\"].includes(event.key)\n      ) {\n        checkMentionText();\n      }\n    },\n    [checkMentionText, searchMention]\n  );\n\n  const onFocus = useCallback(() => {\n    checkMentionText();\n  }, [checkMentionText]);\n\n  return {\n    mentionSearchText,\n    mentionUsers,\n    onKeyUp,\n    onFocus,\n    onSelectUser,\n    loading\n  };\n}\n", "// @ts-check\n// vendors\nimport React, {\n  useImperativeHandle,\n  useState,\n  forwardRef,\n  useMemo,\n  useEffect\n} from \"react\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MentionUser\n */\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n/**\n * @typedef {Object} Props\n * @property {MentionUser[]} users\n * @property {string | null} mentionSearchText\n * @property {(user: MentionUser) => void} onSelect\n * @property {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void} addEventListener\n */\n\n/**\n * @typedef {{prevUser: () => void; nextUser: () => void;}} Ref\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.ForwardRefRenderFunction<Ref, Props>} */\nconst MentionUserList = (\n  { users, mentionSearchText, onSelect, addEventListener },\n  ref\n) => {\n  const [selectedUser, setSelectedUser] = useState(0);\n\n  useImperativeHandle(ref, () => ({\n    prevUser: () => {\n      setSelectedUser(currentSelectedUser => {\n        if (currentSelectedUser === 0) {\n          return 0;\n        }\n\n        return currentSelectedUser - 1;\n      });\n    },\n    nextUser: () => {\n      setSelectedUser(currentSelectedUser => {\n        if (currentSelectedUser === users.length - 1) {\n          return users.length - 1;\n        }\n\n        return currentSelectedUser + 1;\n      });\n    }\n  }));\n\n  useEffect(() => {\n    setSelectedUser(0);\n  }, [users]);\n\n  /**\n   *\n   * @param {string} selectedText\n   * @param {string} rest\n   * @return {string}\n   */\n  function getMentionSelectedNameEl(selectedText, rest) {\n    return `<span class=\"react-input-emoji--mention--item--name__selected\" data-testid=\"metion-selected-word\">${selectedText}</span>${rest}`;\n  }\n\n  /** @type {(MentionUser & {nameHtml: string})[]} */\n  const usersFiltered = useMemo(() => {\n    const searchText = mentionSearchText\n      ? mentionSearchText.substring(1).toLocaleLowerCase()\n      : \"\";\n    return users.map(user => {\n      let nameHtml = user.name;\n\n      if (mentionSearchText && mentionSearchText.length > 1) {\n        if (user.name.toLowerCase().startsWith(searchText)) {\n          nameHtml = getMentionSelectedNameEl(\n            user.name.substring(0, searchText.length),\n            user.name.substring(searchText.length)\n          );\n        } else {\n          const names = user.name.split(\" \");\n\n          nameHtml = names\n            .map(name => {\n              if (name.toLocaleLowerCase().startsWith(searchText)) {\n                return getMentionSelectedNameEl(\n                  name.substring(0, searchText.length),\n                  name.substring(searchText.length)\n                );\n              }\n              return name;\n            })\n            .join(\" \");\n        }\n      }\n\n      return {\n        ...user,\n        nameHtml\n      };\n    });\n  }, [mentionSearchText, users]);\n\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   *\n   * @param {MentionUser} user\n   * @returns {(event: React.MouseEvent) => void} event\n   */\n  function handleClick(user) {\n    return event => {\n      event.stopPropagation();\n      event.preventDefault();\n\n      onSelect(user);\n    };\n  }\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"enter\", event => {\n      event.stopPropagation();\n      event.preventDefault();\n      onSelect(usersFiltered[selectedUser]);\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onSelect, selectedUser, usersFiltered]);\n\n  return (\n    <ul\n      className=\"react-input-emoji--mention--list\"\n      data-testid=\"mention-user-list\"\n    >\n      {usersFiltered.map((user, index) => (\n        <li key={user.id}>\n          <button\n            type=\"button\"\n            onClick={handleClick(user)}\n            className={`react-input-emoji--mention--item${\n              selectedUser === index\n                ? \" react-input-emoji--mention--item__selected\"\n                : \"\"\n            }`}\n            onMouseOver={() => setSelectedUser(index)}\n          >\n            <img\n              className=\"react-input-emoji--mention--item--img\"\n              src={user.image}\n            />\n            <div\n              className=\"react-input-emoji--mention--item--name\"\n              dangerouslySetInnerHTML={{ __html: user.nameHtml }}\n            />\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nconst MentionUserListWithRef = forwardRef(MentionUserList);\n\nexport default MentionUserListWithRef;\n", "// @ts-check\n// vendors\nimport React, { useEffect, useRef, useState } from \"react\";\n\n// hooks\nimport { useMention } from \"../hooks/use-mention\";\n\n// components\nimport MentionUserList from \"./mention-user-list\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MetionUser\n */\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n/**\n * @typedef {Object} Props\n * @property {(text: string) => Promise<MetionUser[]>=} searchMention\n * @property {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void} addEventListener\n * @property {(html: string) => void} appendContent\n * @property {(fn: SanitizeFn) => void} addSanitizeFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.FC<Props>} */\nconst MentionWrapper = ({\n  searchMention,\n  addEventListener,\n  appendContent,\n  addSanitizeFn\n}) => {\n  /** @type {React.MutableRefObject<import('./mention-user-list').Ref | null>} */\n  const metionUserListRef = useRef(null);\n  const [showUserList, setShowUserList] = useState(false);\n\n  const {\n    mentionSearchText,\n    mentionUsers,\n    loading,\n    onKeyUp,\n    onFocus,\n    onSelectUser\n  } = useMention(searchMention);\n\n  useEffect(() => {\n    addSanitizeFn(html => {\n      const container = document.createElement(\"div\");\n      container.innerHTML = html;\n\n      const mentionsEl = Array.prototype.slice.call(\n        container.querySelectorAll(\".react-input-emoji--mention--text\")\n      );\n\n      mentionsEl.forEach(mentionEl => {\n        container.innerHTML = container.innerHTML.replace(\n          mentionEl.outerHTML,\n          `@[${mentionEl.dataset.mentionName}](userId:${mentionEl.dataset.mentionId})`\n        );\n      });\n\n      return container.innerHTML;\n    });\n  }, [addSanitizeFn]);\n\n  useEffect(() => {\n    setShowUserList(mentionUsers.length > 0);\n  }, [mentionUsers]);\n\n  useEffect(() => {\n    /** */\n    function checkClickOutside() {\n      setShowUserList(false);\n    }\n\n    document.addEventListener(\"click\", checkClickOutside);\n\n    return () => {\n      document.removeEventListener(\"click\", checkClickOutside);\n    };\n  }, []);\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"keyUp\", onKeyUp);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onKeyUp]);\n\n  useEffect(() => {\n    /**\n     *\n     * @param {React.KeyboardEvent} event\n     */\n    function handleKeyDown(event) {\n      switch (event.key) {\n        case \"Esc\": // IE/Edge specific value\n        case \"Escape\":\n          setShowUserList(false);\n          break;\n        default:\n          break;\n      }\n    }\n\n    const unsubscribe = addEventListener(\"keyDown\", handleKeyDown);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener]);\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"focus\", onFocus);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onFocus]);\n\n  useEffect(() => {\n    if (showUserList) {\n      const unsubscribeArrowUp = addEventListener(\"arrowUp\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n        metionUserListRef.current.prevUser();\n      });\n\n      const unsubscribeArrowDown = addEventListener(\"arrowDown\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n        metionUserListRef.current.nextUser();\n      });\n\n      return () => {\n        unsubscribeArrowUp();\n        unsubscribeArrowDown();\n      };\n    }\n  }, [addEventListener, showUserList]);\n\n  /**\n   *\n   * @param {MetionUser} user\n   */\n  function handleSelect(user) {\n    onSelectUser();\n    appendContent(\n      `<span class=\"react-input-emoji--mention--text\" data-mention-id=\"${user.id}\" data-mention-name=\"${user.name}\">@${user.name}</span> `\n    );\n  }\n\n  return (\n    <>\n      {loading ? (\n        <div className=\"react-input-emoji--mention--container\">\n          <div className=\"react-input-emoji--mention--loading\">\n            <div className=\"react-input-emoji--mention--loading--spinner\">\n              Loading...\n            </div>\n          </div>\n        </div>\n      ) : (\n        showUserList && (\n          <div\n            className=\"react-input-emoji--mention--container\"\n            onClick={evt => evt.stopPropagation()}\n          >\n            <MentionUserList\n              ref={metionUserListRef}\n              mentionSearchText={mentionSearchText}\n              users={mentionUsers}\n              onSelect={handleSelect}\n              addEventListener={addEventListener}\n            />\n          </div>\n        )\n      )}\n    </>\n  );\n};\n\nexport default MentionWrapper;\n", "// @ts-check\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @template T\n * @returns {import('../types/types').ListenerObj<T>}\n */\nexport function createObserver() {\n  /** @type {import('../types/types').Listerner<T>[]} */\n  let listeners = [];\n\n  return {\n    subscribe: listener => {\n      listeners.push(listener);\n      return () => {\n        listeners = listeners.filter(l => l !== listener);\n      };\n    },\n    publish: event => {\n      listeners.forEach(listener => listener(event));\n    },\n    get currentListerners() {\n      return listeners;\n    }\n  };\n}\n", "// @ts-check\n\nimport { useCallback, useMemo } from \"react\";\nimport { createObserver } from \"../utils/observer\";\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function useEventListeners() {\n  /** @type {TextInputListeners} */\n  const listeners = useMemo(\n    () => ({\n      keyDown: createObserver(),\n      keyUp: createObserver(),\n      arrowUp: createObserver(),\n      arrowDown: createObserver(),\n      enter: createObserver(),\n      focus: createObserver(),\n      blur: createObserver()\n    }),\n    []\n  );\n\n  /**\n   * @template {keyof TextInputListeners} T, K\n   * @type {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void}\n   */\n  const addEventListener = useCallback(\n    (event, fn) => {\n      return listeners[event].subscribe(fn);\n    },\n    [listeners]\n  );\n\n  return { addEventListener, listeners };\n}\n", "// @ts-check\n\nimport { useCallback, useRef } from \"react\";\n\n/**\n * @typedef {import('../types/types').PolluteFn} PolluteFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function usePollute() {\n  /** @type {React.MutableRefObject<PolluteFn[]>} */\n  const polluteFnsRef = useRef([]);\n\n  /** @type {(fn: PolluteFn) => void} */\n  const addPolluteFn = useCallback(fn => {\n    polluteFnsRef.current.push(fn);\n  }, []);\n\n  /** @type {(html: string) => string} */\n  const pollute = useCallback(text => {\n    const result = polluteFnsRef.current.reduce((acc, fn) => {\n      return fn(acc);\n    }, text);\n\n    return result;\n  }, []);\n\n  return { addPolluteFn, pollute };\n}\n", "// @ts-check\n// vendors\nimport React, { useEffect, useRef, forwardRef, useCallback } from \"react\";\n\n// css\nimport \"./styles.css\";\n\n// utils\nimport { replaceAllTextEmojis } from \"./utils/emoji-utils\";\nimport { handleCopy, totalCharacters } from \"./utils/input-event-utils\";\n\n// hooks\nimport { useExpose } from \"./hooks/use-expose\";\nimport { useEmit } from \"./hooks/use-emit\";\n\n// components\nimport TextInput from \"./text-input\";\nimport EmojiPickerWrapper from \"./components/emoji-picker-wrapper\";\nimport MentionWrapper from \"./components/mention-wrapper\";\nimport { useEventListeners } from \"./hooks/use-event-listeners\";\nimport { useSanitize } from \"./hooks/use-sanitize\";\nimport { usePollute } from \"./hooks/user-pollute\";\n\n/**\n * @typedef {import('./types/types').MentionUser} MetionUser\n */\n\n/**\n * @typedef {import('./types/types').ListenerObj<any>} ListenerObj\n */\n\n/**\n * @typedef {object} Props\n * @property {string} value\n * @property {(value: string) => void} onChange\n * @property {\"light\" | \"dark\" | \"auto\"=} theme\n * @property {boolean=} cleanOnEnter\n * @property {(text: string) => void=} onEnter\n * @property {string=} placeholder\n * @property {(size: {width: number, height: number}) => void=} onResize\n * @property {() => void=} onClick\n * @property {() => void=} onFocus\n * @property {() => void=} onBlur\n * @property {boolean=} shouldReturn\n * @property {number=} maxLength\n * @property {boolean=} keepOpened\n * @property {(event: KeyboardEvent) => void=} onKeyDown\n * @property {string=} inputClass\n * @property {boolean=} disableRecent\n * @property {number=} tabIndex\n * @property {number=} height\n * @property {number=} borderRadius\n * @property {string=} borderColor\n * @property {number=} fontSize\n * @property {string=} fontFamily\n * @property {{id: string; name: string; emojis: {id: string; name: string; keywords: string[], skins: {src: string}[]}}[]=} customEmojis\n * @property {import('./types/types').Languages=} language\n * @property {(text: string) => Promise<MetionUser[]>=} searchMention\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n */\n\n/**\n * Input Emoji Component\n * @param {Props} props\n * @param {React.Ref<any>} ref\n * @return {JSX.Element}\n */\nfunction InputEmoji(props, ref) {\n  const {\n    onChange,\n    onEnter,\n    shouldReturn,\n    onResize,\n    onClick,\n    onFocus,\n    onBlur,\n    onKeyDown,\n    theme,\n    cleanOnEnter,\n    placeholder,\n    maxLength,\n    keepOpened,\n    inputClass,\n    disableRecent,\n    tabIndex,\n    value,\n    customEmojis,\n    language,\n    searchMention,\n    buttonElement,\n    buttonRef,\n    // style\n    borderRadius,\n    borderColor,\n    fontSize,\n    fontFamily,\n  } = props;\n\n  /** @type {React.MutableRefObject<import('./text-input').Ref | null>} */\n  const textInputRef = useRef(null);\n\n  const { addEventListener, listeners } = useEventListeners();\n\n  const { addSanitizeFn, sanitize, sanitizedTextRef } = useSanitize(props.shouldReturn);\n\n  const { addPolluteFn, pollute } = usePollute();\n\n  const updateHTML = useCallback(\n    (nextValue = \"\") => {\n      if (textInputRef.current === null) return;\n\n      textInputRef.current.html = replaceAllTextEmojis(nextValue);\n      sanitizedTextRef.current = nextValue;\n    },\n    [sanitizedTextRef]\n  );\n\n  const setValue = useCallback(\n    /**\n     * \n     * @param {string} value\n     */\n    (value) => {\n      updateHTML(value);\n    },\n    [updateHTML]\n  );\n\n  const emitChange = useEmit(textInputRef, onResize, onChange);\n\n  useExpose({\n    ref,\n    setValue,\n    textInputRef,\n    emitChange\n  });\n\n  useEffect(() => {\n    if (sanitizedTextRef.current !== value) {\n      setValue(value);\n    }\n  }, [sanitizedTextRef, setValue, value]);\n\n  // useEffect(() => {\n  //   updateHTML();\n  // }, [updateHTML]);\n\n  useEffect(() => {\n    /**\n     * Handle keydown event\n     * @param {React.KeyboardEvent} event\n     * @return {boolean}\n     */\n    function handleKeydown(event) {\n      if (\n        typeof maxLength !== \"undefined\" &&\n        event.key !== \"Backspace\" &&\n        textInputRef.current !== null &&\n        totalCharacters(textInputRef.current) >= maxLength\n      ) {\n        event.preventDefault();\n      }\n\n      if (event.key === \"Enter\" && textInputRef.current) {\n        event.preventDefault();\n\n        const text = sanitize(textInputRef.current.html);\n\n        emitChange(sanitizedTextRef.current);\n\n        if (\n          typeof onEnter === \"function\" &&\n          listeners.enter.currentListerners.length === 0\n        ) {\n          onEnter(text);\n        }\n\n        if (cleanOnEnter && listeners.enter.currentListerners.length === 0) {\n          updateHTML(\"\");\n        }\n\n        if (typeof onKeyDown === \"function\") {\n          onKeyDown(event.nativeEvent);\n        }\n\n        return false;\n      }\n\n      if (typeof onKeyDown === \"function\") {\n        onKeyDown(event.nativeEvent);\n      }\n\n      return true;\n    }\n\n    const unsubscribe = addEventListener(\"keyDown\", handleKeydown);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [\n    addEventListener,\n    cleanOnEnter,\n    emitChange,\n    listeners.enter.currentListerners.length,\n    maxLength,\n    onEnter,\n    onKeyDown,\n    sanitize,\n    sanitizedTextRef,\n    updateHTML\n  ]);\n\n  useEffect(() => {\n    /** */\n    function handleFocus() {\n      if (typeof onClick === \"function\") {\n        onClick();\n      }\n\n      if (typeof onFocus === \"function\") {\n        onFocus();\n      }\n    }\n\n    const unsubscribe = addEventListener(\"focus\", handleFocus);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onClick, onFocus]);\n\n  useEffect(() => {\n    /** */\n    function handleBlur() {\n      if (typeof onBlur === \"function\") {\n        onBlur();\n      }\n    }\n\n    const unsubscribe = addEventListener(\"blur\", handleBlur);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onBlur]);\n\n  /**\n   *\n   * @param {string} html\n   */\n  function handleTextInputChange(html) {\n    sanitize(html);\n\n    if (value !== sanitizedTextRef.current) {\n      emitChange(sanitizedTextRef.current);\n    }\n  }\n\n  /**\n   *\n   * @param {string} html\n   */\n  function appendContent(html) {\n    if (\n      typeof maxLength !== \"undefined\" &&\n      textInputRef.current !== null &&\n      totalCharacters(textInputRef.current) >= maxLength\n    ) {\n      return;\n    }\n\n    if (textInputRef.current !== null) {\n      textInputRef.current.appendContent(html);\n    }\n  }\n\n  /**\n   * Handle past on input\n   * @param {React.ClipboardEvent} event\n   */\n  function handlePaste(event) {\n    event.preventDefault();\n    let content;\n    if (event.clipboardData) {\n      content = event.clipboardData.getData(\"text/plain\");\n      content = pollute(content);\n      document.execCommand(\"insertHTML\", false, content);\n    }\n  }\n\n  return (\n    <div className=\"react-emoji\">\n      <MentionWrapper\n        searchMention={searchMention}\n        addEventListener={addEventListener}\n        appendContent={appendContent}\n        addSanitizeFn={addSanitizeFn}\n      />\n      <TextInput\n        ref={textInputRef}\n        onCopy={handleCopy}\n        onPaste={handlePaste}\n        shouldReturn={shouldReturn}\n        onBlur={listeners.blur.publish}\n        onFocus={listeners.focus.publish}\n        onArrowUp={listeners.arrowUp.publish}\n        onArrowDown={listeners.arrowDown.publish}\n        onKeyUp={listeners.keyUp.publish}\n        onKeyDown={listeners.keyDown.publish}\n        onEnter={listeners.enter.publish}\n        placeholder={placeholder}\n        style={{\n          borderRadius,\n          borderColor,\n          fontSize,\n          fontFamily\n        }}\n        tabIndex={tabIndex}\n        className={inputClass}\n        onChange={handleTextInputChange}\n      />\n      <EmojiPickerWrapper\n        theme={theme}\n        keepOpened={keepOpened}\n        disableRecent={disableRecent}\n        customEmojis={customEmojis}\n        addSanitizeFn={addSanitizeFn}\n        addPolluteFn={addPolluteFn}\n        appendContent={appendContent}\n        buttonElement={buttonElement}\n        buttonRef={buttonRef}\n        language={language}\n      />\n    </div>\n  );\n}\n\nconst InputEmojiWithRef = forwardRef(InputEmoji);\n\nInputEmojiWithRef.defaultProps = {\n  theme: /** @type {const} */ (\"auto\"),\n  height: 30,\n  placeholder: \"Type a message\",\n  borderRadius: 21,\n  borderColor: \"#EAEAEA\",\n  fontSize: 15,\n  fontFamily: \"sans-serif\",\n  tabIndex: 0,\n  shouldReturn: false,\n  customEmojis: [],\n  language: undefined,\n};\n\nexport default InputEmojiWithRef;\n"],
  "mappings": "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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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",
  "names": ["styleInject", "css", "ref", "insertAt", "document", "head", "getElementsByTagName", "style", "createElement", "type", "firstChild", "insertBefore", "appendChild", "styleSheet", "cssText", "createTextNode", "TRANSPARENT_GIF", "replaceAllTextEmojis", "text", "allEmojis", "getAllEmojisFromText", "_toConsumableArray", "Set", "forEach", "emoji", "replaceAll", "getInputEmojiHTML", "str", "find", "replace", "RegExp", "match", "getImageEmoji", "_emojiPickerEl$shadow", "emojiPickerEl", "querySelector", "getInputEmojiNativeHTML", "emojiSpanEl", "shadowRoot", "concat", "name", "replaceAllTextEmojiToString", "html", "container", "innerHTML", "images", "Array", "prototype", "slice", "call", "querySelectorAll", "image", "outerHTML", "dataset", "handleCopy", "event", "selectedText", "window", "getSelection", "i", "len", "rangeCount", "getRangeAt", "cloneContents", "replaceEmojiToString", "clipboardData", "setData", "innerText", "preventDefault", "handlePasteHtmlAtCaret", "sel", "range", "deleteContents", "el", "frag", "createDocumentFragment", "node", "lastNode", "insertNode", "cloneRange", "setStartAfter", "collapse", "removeAllRanges", "addRange", "totalCharacters", "_ref2", "textCount", "length", "emojisCount", "moveCaretToEnd", "input", "selection", "createRange", "current", "selectNodeContents", "removeHtmlExceptBr", "inputDiv", "temp", "stripped", "final", "useSanitize", "shouldReturn", "sanitizeFnsRef", "useRef", "sanitizedTextRef", "addSanitizeFn", "useCallback", "fn", "push", "sanitize", "result", "reduce", "acc", "replaceAllHtmlToString", "useExpose", "_ref", "textInputRef", "setValue", "emitChange", "_useSanitize", "useImperativeHandle", "value", "focus", "blur", "useEmit", "onResize", "onChange", "currentSizeRef", "onChangeFn", "checkAndEmitResize", "currentSize", "nextSize", "size", "width", "height", "sanitizedText", "useEffect", "TextInput", "placeholder", "tabIndex", "className", "props", "_objectWithoutProperties", "_excluded", "appendContent", "placeholderRef", "visibility", "offsetWidth", "offsetHeight", "handleKeyDown", "key", "shiftKey", "ctrlKey", "onEnter", "onArrowUp", "onArrowDown", "onKeyDown", "handleClick", "onFocus", "handleKeyUp", "onKeyUp", "React", "onClick", "contentEditable", "onBlur", "onCopy", "onPaste", "TextInputWithRef", "forwardRef", "EmojiPickerButton", "showPicker", "toggleShowPicker", "buttonElement", "buttonRef", "localButtonRef", "_useState", "useState", "_useState2", "_slicedToArray", "showCustomButtonContent", "setShowCustomButtonContent", "_buttonRef$current$ch", "_buttonRef$current", "_buttonElement$childN", "_buttonElement$childN2", "childNodes", "xmlns", "viewBox", "d", "$e5534fc185f7111e$export$2e2bcd8739ae039", "$dvPge$useRef", "instance", "update", "$dvPge$useEffect", "$dvPge$Picker", "$dvPge$react", "EmojiPicker", "theme", "onSelectEmoji", "disableRecent", "customEmojis", "language", "categories", "useMemo", "categoryies", "i18n", "undefined", "require", "Picker", "data", "previewPosition", "onEmojiSelect", "custom", "set", "memo", "EmojiPickerContainer", "handleSelectEmoji", "position", "evt", "stopPropagation", "top", "EMOJI_PICKER_CONTAINER_HEIGHT", "EmojiPickerWrapper", "keepOpened", "addPolluteFn", "setShowPicker", "_useState3", "_useState4", "customButton", "setCustomButton", "_useState5", "_useState6", "emojiPickerPosition", "setEmojiPickerPosition", "checkClickOutside", "element", "target", "classList", "contains", "addEventListener", "removeEventListener", "calcTopPosition", "currentShowPicker", "btn", "currentTarget", "btnRect", "getBoundingClientRect", "popoverHeight", "ReactDOM", "createPortal", "Fragment", "getTextFromAtToCaret", "getRangeFromAtToCaret", "substring", "begin", "end", "deleteTextFromAtToCaret", "deleteData", "elementWithFocus", "getElementWithFocus", "caretOffset", "textContent", "lastAt", "lastIndexOf", "getSelectionStart", "preCaretRange", "setEnd", "endContainer", "endOffset", "toString", "textRange", "preCaretTextRange", "body", "createTextRange", "moveToElementText", "setEndPoint", "anchorNode", "nodeType", "useMention", "searchMention", "loading", "setLoading", "mentionUsers", "setMentionUsers", "mentionSearchText", "setMentionSearchText", "onSelectUser", "checkMentionText", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "metionText", "users", "wrap", "_callee$", "_context", "prev", "next", "sent", "stop", "_x", "_callee2", "_getElementWithFocus", "_callee2$", "_context2", "abrupt", "parentElement", "hasAttribute", "remove", "includes", "apply", "arguments", "MentionUserList", "onSelect", "selectedUser", "setSelectedUser", "prevUser", "currentSelectedUser", "nextUser", "getMentionSelectedNameEl", "rest", "usersFiltered", "searchText", "toLocaleLowerCase", "map", "user", "nameHtml", "toLowerCase", "startsWith", "names", "split", "join", "_objectSpread", "unsubscribe", "index", "id", "onMouseOver", "src", "dangerouslySetInnerHTML", "__html", "MentionUserListWithRef", "MentionWrapper", "metionUserListRef", "showUserList", "setShowUserList", "_useMention", "mentionsEl", "mentionEl", "mentionName", "mentionId", "unsubscribeArrowUp", "unsubscribeArrowDown", "handleSelect", "createObserver", "listeners", "subscribe", "listener", "filter", "l", "publish", "currentListerners", "useEventListeners", "keyDown", "keyUp", "arrowUp", "arrowDown", "enter", "usePollute", "polluteFnsRef", "pollute", "InputEmoji", "cleanOnEnter", "maxLength", "inputClass", "borderRadius", "borderColor", "fontSize", "fontFamily", "_useEventListeners", "_usePollute", "updateHTML", "nextValue", "handleKeydown", "nativeEvent", "handleFocus", "handleBlur", "handleTextInputChange", "handlePaste", "content", "getData", "execCommand", "InputEmojiWithRef", "defaultProps"]
}
